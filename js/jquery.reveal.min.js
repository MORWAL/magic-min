(function($){ $('a[data-reveal-id]').live('click', function(e){e.preventDefault();var modalLocation = $(this).attr('data-reveal-id');$('#'+modalLocation).reveal($(this).data());}); $.fn.hideModal = function(options){var self = this,modal = $(self),topMeasure = parseInt(modal.css('top'));$('.reveal-modal-bg').css({'display' : 'none'});modal.css({'visibility' : 'hidden', 'top' : topMeasure});}$.fn.reveal = function(options){var defaults = {animation: 'fade', animationspeed: 300, closeonbackgroundclick: true, dismissmodalclass: 'close-reveal-modal', secondaryDismiss: 'close-modal', onOpening: function(){}, onOpened: function(){}, onClosing: function(){}, onClosed: function(){} }; var options = $.extend({}, defaults, options); return this.each(function(){var modal = $(this),topMeasure= parseInt(modal.css('top')),topOffset = modal.height()+ topMeasure,locked = false,modalBG = $('.reveal-modal-bg');if(modalBG.length == 0){modalBG = $('<div class="reveal-modal-bg" />').insertAfter(modal);}openModal();var closeButton = $('.' + options.dismissmodalclass).bind('click.modalEvent',closeModal)var secondClose = $('.' + options.secondaryDismiss).bind('click.modalEvent', closeModal);if(options.closeonbackgroundclick){modalBG.css({"cursor":"pointer"})modalBG.bind('click.modalEvent',closeModal)}function openModal(){modalBG.unbind('click.modalEvent');$('.' + options.dismissmodalclass).unbind('click.modalEvent');$('.' + options.secondaryDismiss).unbind('click.modalEvent');if(!locked){lockModal();if(options.animation == "fadeAndPop"){modal.css({'top': $(document).scrollTop()-topOffset, 'opacity' : 0, 'visibility' : 'visible'});modalBG.fadeIn(options.animationspeed/2);modal.delay(options.animationspeed/2).animate({"top": $(document).scrollTop()+topMeasure,"opacity" : 1}, options.animationspeed,unlockModal());}if(options.animation == "fade"){modal.css({'opacity' : 0, 'visibility' : 'visible', 'top': $(document).scrollTop()+topMeasure});modalBG.fadeIn(options.animationspeed/2);modal.delay(options.animationspeed/2).animate({"opacity" : 1}, options.animationspeed,unlockModal());} if(options.animation == "none"){modal.css({'visibility' : 'visible', 'top':$(document).scrollTop()+topMeasure});modalBG.css({"display":"block"});unlockModal()} options.onOpened.call( [], modal); }}function closeModal(){if(!locked){lockModal();options.onClosed.call( [], modal); if(options.animation == "fadeAndPop"){modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);modal.animate({"top":$(document).scrollTop()-topOffset,"opacity" : 0}, options.animationspeed/2, function(){modal.css({'top':topMeasure, 'opacity' : 1, 'visibility' : 'hidden'});unlockModal();});}if(options.animation == "fade"){modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);modal.animate({"opacity" : 0}, options.animationspeed, function(){modal.css({'opacity' : 1, 'visibility' : 'hidden', 'top' : topMeasure});unlockModal();});}if(options.animation == "none"){modal.css({'visibility' : 'hidden', 'top' : topMeasure});modalBG.css({'display' : 'none'});} }return false;}$('body').keyup(function (event){if(options.closeonbackgroundclick){if (event.which === 27){ closeModal();}}});function unlockModal(){ locked = false;}function lockModal(){locked = true;}});}})(jQuery);(function($){ $('a[data-reveal-id]').live('click', function(e){e.preventDefault();var modalLocation = $(this).attr('data-reveal-id');$('#'+modalLocation).reveal($(this).data());}); $.fn.hideModal = function(options){var self = this,modal = $(self),topMeasure = parseInt(modal.css('top'));$('.reveal-modal-bg').css({'display' : 'none'});modal.css({'visibility' : 'hidden', 'top' : topMeasure});}$.fn.reveal = function(options){var defaults = {animation: 'fade', animationspeed: 300, closeonbackgroundclick: true, dismissmodalclass: 'close-reveal-modal', secondaryDismiss: 'close-modal', onOpening: function(){}, onOpened: function(){}, onClosing: function(){}, onClosed: function(){} }; var options = $.extend({}, defaults, options); return this.each(function(){var modal = $(this),topMeasure= parseInt(modal.css('top')),topOffset = modal.height()+ topMeasure,locked = false,modalBG = $('.reveal-modal-bg');if(modalBG.length == 0){modalBG = $('<div class="reveal-modal-bg" />').insertAfter(modal);}openModal();var closeButton = $('.' + options.dismissmodalclass).bind('click.modalEvent',closeModal)var secondClose = $('.' + options.secondaryDismiss).bind('click.modalEvent', closeModal);if(options.closeonbackgroundclick){modalBG.css({"cursor":"pointer"})modalBG.bind('click.modalEvent',closeModal)}function openModal(){modalBG.unbind('click.modalEvent');$('.' + options.dismissmodalclass).unbind('click.modalEvent');$('.' + options.secondaryDismiss).unbind('click.modalEvent');if(!locked){lockModal();if(options.animation == "fadeAndPop"){modal.css({'top': $(document).scrollTop()-topOffset, 'opacity' : 0, 'visibility' : 'visible'});modalBG.fadeIn(options.animationspeed/2);modal.delay(options.animationspeed/2).animate({"top": $(document).scrollTop()+topMeasure,"opacity" : 1}, options.animationspeed,unlockModal());}if(options.animation == "fade"){modal.css({'opacity' : 0, 'visibility' : 'visible', 'top': $(document).scrollTop()+topMeasure});modalBG.fadeIn(options.animationspeed/2);modal.delay(options.animationspeed/2).animate({"opacity" : 1}, options.animationspeed,unlockModal());} if(options.animation == "none"){modal.css({'visibility' : 'visible', 'top':$(document).scrollTop()+topMeasure});modalBG.css({"display":"block"});unlockModal()} options.onOpened.call( [], modal); }}function closeModal(){if(!locked){lockModal();options.onClosed.call( [], modal); if(options.animation == "fadeAndPop"){modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);modal.animate({"top":$(document).scrollTop()-topOffset,"opacity" : 0}, options.animationspeed/2, function(){modal.css({'top':topMeasure, 'opacity' : 1, 'visibility' : 'hidden'});unlockModal();});}if(options.animation == "fade"){modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);modal.animate({"opacity" : 0}, options.animationspeed, function(){modal.css({'opacity' : 1, 'visibility' : 'hidden', 'top' : topMeasure});unlockModal();});}if(options.animation == "none"){modal.css({'visibility' : 'hidden', 'top' : topMeasure});modalBG.css({'display' : 'none'});} }return false;}$('body').keyup(function (event){if(options.closeonbackgroundclick){if (event.which === 27){ closeModal();}}});function unlockModal(){ locked = false;}function lockModal(){locked = true;}});}})(jQuery);